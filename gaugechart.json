{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "A simple donut chart with embedded data.",
    "data": {
      "url": "https://raw.githubusercontent.com/joeechua/FIT3179_A2/main/fortune_500_USA.csv"
    },
    "width": 500,
    "height": 500,
    "background": null,
    "params": [
        {
          "name": "company_selection",
          "bind": {
            "input": "select",
            "options": [null, "Exelon",
            "3M",
            "Home Depot",
            "Wells Fargo",
            "Plains GP Holdings",
            "Bristol-Myers Squibb",
            "Bank of America Corp.",
            "ViacomCBS",
            "Chevron",
            "Liberty Mutual Insurance Group",
            "New York Life Insurance",
            "Citigroup",
            "Microsoft",
            "AbbVie",
            "Procter & Gamble",
            "United Airlines Holdings",
            "Delta Air Lines",
            "Travelers Cos.",
            "Mondelez International",
            "Gilead Sciences",
            "Cigna",
            "Albertsons Cos.",
            "Micron Technology",
            "Exxon Mobil",
            "Allstate",
            "Marathon Petroleum",
            "Bunge",
            "FedEx",
            "Costco Wholesale",
            "Charter Communications",
            "Johnson & Johnson",
            "Fannie Mae",
            "Arrow Electronics",
            "Boeing",
            "Dollar General",
            "Philip Morris International",
            "Phillips 66",
            "MetLife",
            "Raytheon Technologies",
            "Rite Aid",
            "USAA",
            "Valero Energy",
            "INTL FCStone",
            "HCA Healthcare",
            "Humana",
            "Alphabet",
            "Northrop Grumman",
            "Cardinal Health",
            "United Parcel Service",
            "Tyson Foods",
            "StoneX",
            "Kroger",
            "CHS",
            "World Fuel Services",
            "Travelers",
            "Intel",
            "Verizon Communications",
            "Kraft Heinz",
            "Meta Platforms",
            "Albertsons",
            "International Business Machines",
            "McKesson",
            "Goldman Sachs Group",
            "Sysco",
            "Dell Technologies",
            "Coca-Cola",
            "Truist Financial",
            "Deere",
            "Jabil",
            "Walmart",
            "Performance Food Group",
            "Apple",
            "Nucor",
            "Paccar",
            "JPMorgan Chase",
            "DuPont",
            "Dow",
            "US Foods Holding",
            "Nike",
            "Lockheed Martin",
            "TIAA",
            "Enterprise Products Partners",
            "Hewlett Packard Enterprise",
            "Archer Daniels Midland (ADM)",
            "United Technologies",
            "Berkshire Hathaway",
            "Archer Daniels Midland",
            "Nationwide",
            "Target",
            "JPMorgan Chase & Co.",
            "State Farm Insurance Cos.",
            "U.S. Postal Service",
            "Cisco Systems",
            "Publix Super Markets",
            "Oracle",
            "General Dynamics",
            "Energy Transfer",
            "General Motors",
            "Northwestern Mutual",
            "Tesla",
            "Bank of America",
            "American Airlines Group",
            "Comcast",
            "Ford Motor",
            "Walgreens Boots Alliance",
            "United Natural Foods",
            "Centene",
            "Prudential Financial",
            "Progressive",
            "TJX",
            "Macy's",
            "American International Group",
            "General Electric",
            "Caterpillar",
            "Thermo Fisher Scientific",
            "CVS Health",
            "HP",
            "Starbucks",
            "Pfizer",
            "Freddie Mac",
            "Capital One Financial",
            "Raytheon",
            "Abbott Laboratories",
            "Anthem",
            "Netflix",
            "Morgan Stanley",
            "Best Buy",
            "State Farm Insurance",
            "TD Synnex",
            "ConocoPhillips",
            "U.S. Bancorp",
            "Dollar Tree",
            "UnitedHealth Group",
            "Amazon",
            "Eli Lilly",
            "Walt Disney",
            "American Express",
            "Lowe's",
            "Massachusetts Mutual Life Insurance",
            "Tech Data",
            "Schlumberger",
            "AT&T",
            "Facebook",
            "AmerisourceBergen",
            "Amgen",
            "Merck",
            "Honeywell International",
            "PepsiCo",
            "PBF Energy"],
            "labels": ["Overall", "Exelon",
            "3M",
            "Home Depot",
            "Wells Fargo",
            "Plains GP Holdings",
            "Bristol-Myers Squibb",
            "Bank of America Corp.",
            "ViacomCBS",
            "Chevron",
            "Liberty Mutual Insurance Group",
            "New York Life Insurance",
            "Citigroup",
            "Microsoft",
            "AbbVie",
            "Procter & Gamble",
            "United Airlines Holdings",
            "Delta Air Lines",
            "Travelers Cos.",
            "Mondelez International",
            "Gilead Sciences",
            "Cigna",
            "Albertsons Cos.",
            "Micron Technology",
            "Exxon Mobil",
            "Allstate",
            "Marathon Petroleum",
            "Bunge",
            "FedEx",
            "Costco Wholesale",
            "Charter Communications",
            "Johnson & Johnson",
            "Fannie Mae",
            "Arrow Electronics",
            "Boeing",
            "Dollar General",
            "Philip Morris International",
            "Phillips 66",
            "MetLife",
            "Raytheon Technologies",
            "Rite Aid",
            "USAA",
            "Valero Energy",
            "INTL FCStone",
            "HCA Healthcare",
            "Humana",
            "Alphabet",
            "Northrop Grumman",
            "Cardinal Health",
            "United Parcel Service",
            "Tyson Foods",
            "StoneX",
            "Kroger",
            "CHS",
            "World Fuel Services",
            "Travelers",
            "Intel",
            "Verizon Communications",
            "Kraft Heinz",
            "Meta Platforms",
            "Albertsons",
            "International Business Machines",
            "McKesson",
            "Goldman Sachs Group",
            "Sysco",
            "Dell Technologies",
            "Coca-Cola",
            "Truist Financial",
            "Deere",
            "Jabil",
            "Walmart",
            "Performance Food Group",
            "Apple",
            "Nucor",
            "Paccar",
            "JPMorgan Chase",
            "DuPont",
            "Dow",
            "US Foods Holding",
            "Nike",
            "Lockheed Martin",
            "TIAA",
            "Enterprise Products Partners",
            "Hewlett Packard Enterprise",
            "Archer Daniels Midland (ADM)",
            "United Technologies",
            "Berkshire Hathaway",
            "Archer Daniels Midland",
            "Nationwide",
            "Target",
            "JPMorgan Chase & Co.",
            "State Farm Insurance Cos.",
            "U.S. Postal Service",
            "Cisco Systems",
            "Publix Super Markets",
            "Oracle",
            "General Dynamics",
            "Energy Transfer",
            "General Motors",
            "Northwestern Mutual",
            "Tesla",
            "Bank of America",
            "American Airlines Group",
            "Comcast",
            "Ford Motor",
            "Walgreens Boots Alliance",
            "United Natural Foods",
            "Centene",
            "Prudential Financial",
            "Progressive",
            "TJX",
            "Macy's",
            "American International Group",
            "General Electric",
            "Caterpillar",
            "Thermo Fisher Scientific",
            "CVS Health",
            "HP",
            "Starbucks",
            "Pfizer",
            "Freddie Mac",
            "Capital One Financial",
            "Raytheon",
            "Abbott Laboratories",
            "Anthem",
            "Netflix",
            "Morgan Stanley",
            "Best Buy",
            "State Farm Insurance",
            "TD Synnex",
            "ConocoPhillips",
            "U.S. Bancorp",
            "Dollar Tree",
            "UnitedHealth Group",
            "Amazon",
            "Eli Lilly",
            "Walt Disney",
            "American Express",
            "Lowe's",
            "Massachusetts Mutual Life Insurance",
            "Tech Data",
            "Schlumberger",
            "AT&T",
            "Facebook",
            "AmerisourceBergen",
            "Amgen",
            "Merck",
            "Honeywell International",
            "PepsiCo",
            "PBF Energy"],
            "name": "Select Company: "
          }
        },
        {
          "name": "year_selection",
          "bind": {
            "input": "select",
            "options": [null, "2019", "2020", "2021"],
            "labels": ["Overall", "2019", "2020", "2021"],
            "name": "Select Year: "
          }
        }
      ],
    "transform": [{"filter":"company_selection == null || datum.name == company_selection"},{"filter":"year_selection == null || datum.year == year_selection"},{"calculate": "((datum.profits * 100000000) / datum.employees)", "as": "rpe"}, {"calculate": "(datum.rpe + 31166666)/(215662162 + 31166666)", "as": "rpe_perc"}, 
    {"calculate": "datum.rpe_perc*180", "as":"rpe_angle"},
    {"calculate": "-1.58 + (datum.rpe_angle *0.0174533)", "as": "rpe_rad"}],
    "layer":[
    {
      "mark":{"type":"arc", "innerRadius":190, "theta":-1.58, "theta2":1.58},
      "encoding": {
        "fill":{"value":"#64B6EE"}
      }
    },
    {
      "mark":{"type":"arc", "innerRadius":230, "theta":-1.58, "theta2":-1.04},
      "encoding": {
        "stroke":{"value":"black"},
        "fillOpacity":{"value":0},
        "strokeWidth":{"value":0.03}
      }
    },{
      "mark":{"type":"arc", "innerRadius":230, "theta":-1.04, "theta2":-0.5},
      "encoding": {
        "stroke":{"value":"black"},
        "fillOpacity":{"value":0},
        "strokeWidth":{"value":0.03}
        
      }
    },
    {
      "mark":{"type":"arc", "innerRadius":230, "theta":-0.5, "theta2":-0.04},
      "encoding": {
        "stroke":{"value":"black"},
        "fillOpacity":{"value":0},
        "strokeWidth":{"value":0.03}
      }
    },
    {
      "mark":{"type":"arc", "innerRadius":230, "theta":-0.04, "theta2":0.5},
      "encoding": {
        "stroke":{"value":"black"},
        "fillOpacity":{"value":0},
        "strokeWidth":{"value":0.03}
      }
    },
    {
      "mark":{"type":"arc", "innerRadius":230, "theta":0.5, "theta2":1.04},
      "encoding": {
        "stroke":{"value":"black"},
        "fillOpacity":{"value":0},
        "strokeWidth":{"value":0.03}
      }
    },
    {
      "mark":{"type":"arc", "innerRadius":230, "theta":1.04, "theta2":1.58},
      "encoding": {
        "stroke":{"value":"black"},
        "fillOpacity":{"value":0},
        "strokeWidth":{"value":0.03}
      }
    }, {
      "mark":{"type":"arc","theta":-1.58, "theta2":1.58, "radius":190, "innerRadius":235},
      "encoding": {
        "fill":{"value":"lightgrey"}
      }
    },
     {
      "mark":{"type":"arc","theta":-1.58, "radius":190, "innerRadius":235},
      "encoding": {
        "theta": {"stack":true, "scale":{"type":"linear","rangeMax":1.5708, "rangeMin":-1.5708}},
        "theta2":{"field":"rpe_rad", "type": "quantitative", "aggregate":"average"},
        "fill":{"value":"#2C43B0"},
        "tooltip":[
          {"field":"rpe"},
          {"field":"rpe_perc"},
          {"field":"rpe_angle"},
          {"field":"rpe_rad"},
          {"field":"name"}
        ]
      }
    },
    {"mark": {"type": "text", "radius": 170},
      "encoding": {
        "text": {"value":["1.4", "1.5", "1.6", "1.7", "1.8", "1.9", "2.0"]}
      }
    },{"mark":{"type":"point", "x":250, "y":70}, 
    "encoding": {
      "color":{"value":"black"},
      "fill":{"value":"black"},
      "size":{"value":12}, 
      "shape":{"value":"M 0 0 L -1 104 Q 0 106 1 104 L 0 0"},
      "angle": {
      "field": "rpe_rad", "type": "quantitative",
      "scale": {"domain": [0, 90], "range": [-31166666, 215662162]}
    },
      "tooltip":[{"field":"rpe_rad"}]}}]
    
  }